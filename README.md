# SSR Performance Stencil vs React

This Repo tries to show how the performance of ssr is degraded when using React components generated by stencil

TL:DR
This test uses this [code](react/src/ssrRender.ts)

```js
  const rawHtml = ReactDOMServer.renderToString(jsx); // Render SSR React
  const { html } = await hydrate.renderToString(rawHtml); // Render SSR stencil from React output
  return html
```

## How to build

On root to build whole project run

```
make build
```

## How to run server

Just navigate to react folder

```
cd react
```

And run the sever

```
yarn server
```

Then, to take a look at one component render access http://localhost:1337

To take a look at a thousand renders access http://localhost:1337/thousand

## Benchmark


When we `renderToString` just one component the React(firstRender) and stencil(secondRender) render methods do not diverge too much

<img src="https://user-images.githubusercontent.com/16295402/134042873-500db7e9-31d7-411e-a0f3-11bb0ffcc5c9.png" width="60%" />

But when rendering 1000 components (for illustration purposes), the React(firstRender) and stencil(secondRender) render methods have a considerable performance difference

<img src="https://user-images.githubusercontent.com/16295402/134042891-150b75f0-7cda-460d-9885-3e1502f520bf.png" width="60%" />

This is also true when rendering a React page that uses some stencil generated components.
